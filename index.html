<html>
<head>

    <title>PROTOTYPE</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./client/css/base.css" />
    <script src="./client/js/application/ENUMS.js"></script>
    <script src="./client/js/application/MATH.js"></script>
    <script type="module">


    /*
    let meta = document.createElement('meta');
    meta.name = "viewport";
    meta.content = "initial-scale=1, maximum-scale=1";
    document.getElementsByTagName('head')[0].appendChild(meta);
*/

    let isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    if (isIOS) {
        document.addEventListener("click", function(e){
            e.preventDefault();
        },{passive: false});
        document.addEventListener("mouseup", function(e){
            e.preventDefault();
        },{passive: false});
        document.addEventListener("mousedown", function(e){
            e.preventDefault();
        },{passive: false});
        document.body.onclick = function(e) {
            e.preventDefault();
        }
    } else {
        document.onclick = function(e) {
            e.preventDefault();
        }

    }
    document.addEventListener("touchstart", function(e){
        e.preventDefault();
    },{passive: false});
        Element.prototype.remove = function() {
            this.parentElement.removeChild(this);
        };

        NodeList.prototype.remove = HTMLCollection.prototype.remove = function() {
            for(let i = this.length - 1; i >= 0; i--) {
                if(this[i] && this[i].parentElement) {
                    this[i].parentElement.removeChild(this[i]);
                }
            }
        };

        window.SYSTEM_SETUP = {
            DEBUG:{
                on:false
            }
        };

        if (window.location.href === 'http://127.0.0.1:3000/' || window.location.href ===  'http://localhost:3000/' || window.location.href ===  'http://192.168.0.100:3000/') {
            window.pollingOn = true;
       //     console.log("Pipeline is On")
        } else {
            window.pollingOn = false;
            console.log("No Pipeline polling")
        }

        const dataPipelineOptions = {
            "jsonRegUrl":"client/json/config_urls.json",
            "jsonConfigUrl":"client/json",
            "jsonPipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":15
                }
            },
            "svgPipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":0.2
                }
            },
            "imagePipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":0.5
                }
            }
        };

        import * as APPLICATION from './client/js/Application.js';

    //    console.log('APP:', APPLICATION);
    //    console.log('ENUMS:', ENUMS);

        const devMode = true;
        window.client = new APPLICATION.Client(devMode, navigator);
        client.initClientSetup(dataPipelineOptions);


    window.clickBody = function() {
        // dummy function
    }

    </script>

</head>

<body id="canvas_window"></body>

</html>
