<html>
<head>

    <title>PROTOTYPE</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./client/css/base.css" />
    <script src="./client/js/application/ENUMS.js"></script>
    <script src="./client/js/application/MATH.js"></script>
    <script type="module">

        /*
        let meta = document.createElement('meta');
        meta.name = "viewport";
        meta.content = "initial-scale=1, maximum-scale=1";
        document.getElementsByTagName('head')[0].appendChild(meta);
*/
        document.addEventListener("touchstart", function(e){
            e.preventDefault();
        },{passive: false});

        Element.prototype.remove = function() {
            this.parentElement.removeChild(this);
        };

        NodeList.prototype.remove = HTMLCollection.prototype.remove = function() {
            for(let i = this.length - 1; i >= 0; i--) {
                if(this[i] && this[i].parentElement) {
                    this[i].parentElement.removeChild(this[i]);
                }
            }
        };

        window.SYSTEM_SETUP = {
            DEBUG:{
                on:false
            }
        };

        if (window.location.href === 'http://127.0.0.1:3000/' || window.location.href ===  'http://localhost:3000/' || window.location.href ===  'http://192.168.0.100:3000/') {
            window.pollingOn = true;
       //     console.log("Pipeline is On")
        } else {
            window.pollingOn = false;
            console.log("No Pipeline polling")
        }

        const dataPipelineOptions = {
            "jsonRegUrl":"client/json/config_urls.json",
            "jsonConfigUrl":"client/json",
            "jsonPipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":2
                }
            },
            "svgPipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":0.2
                }
            },
            "imagePipe":{
                "polling":{
                    "enabled":window.pollingOn,
                    "frequency":0.5
                }
            }
        };

        import * as APPLICATION from './client/js/Application.js';

    //    console.log('APP:', APPLICATION);
        console.log('ENUMS:', ENUMS);

        const devMode = true;
        const env = navigator;
        window.client = new APPLICATION.Client(devMode, env);
        client.initClientSetup(dataPipelineOptions);



    </script>

</head>

<body id="canvas_window"></body>

</html>
